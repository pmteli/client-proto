
<%= render :partial => "/your_electric/cost_slider" %>
<%= render :partial => "/your_cost/billing" %>
<%= render :partial => "/your_cost/recommendations" %>

<script type="text/javascript">
    $( document ).ready(function() {

        function initRecommendations() {
            var $container = $('#recommendations');
            var $horizontalRecs;

            var _init = function () {
                $horizontalRecs = $container.filter('.horizontal').find('.well');
                console.log("adjusting height from index");
                _setHeight();
            };

            var _setHeight = function () {
                var _height = 0;
                var _shim = 70;
                var $temp, _tempHeight;

                for (var x = $horizontalRecs.length; x--;) {
                    $temp = $($horizontalRecs[x]);
                    _tempHeight = $temp.outerHeight();

                    console.log("tempheight = " + _tempHeight);

                    if (_tempHeight > _height) {
                        _height = _tempHeight;
                    }
                }
                //$horizontalRecs.outerHeight((_height + _shim) + 'px');

                //setTimeout(function () {
                //    $horizontalRecs.outerHeight((_height + _shim) + 'px');
                //}, 2500);
            };

            if ($container.length > 0) {
                console.log("container lenght = " + $container.length);
                _init();
            }
        };

        var $carousel = $('#dashboard-carousel');
        $carousel.bind('slid.bs.carousel', function(e) {
            var active = $(e.target).find('.carousel-inner > .item.active');
            var from = active.index();
            var category = $(active).attr('id');
            console.log('category = ' + category);
            $(".carousel ul.nav-pills li.active").removeClass("active");
            $(".carousel ul.nav-pills li#pill_" + category).addClass("active");
            load_recommendations('recommendations', category, '/your_electric/recommendations');
            console.log("triggering window resize event");
            $(window).trigger('resize');
            //var next = $(e.relatedTarget);
            //var to = next.index();
            //console.log('sliding' + from + ' => ' + to);
        });

        console.log("calling initRecommendations()");
        initRecommendations();

        $('.radio-custom > input[type=radio]').each(function () {
            var $this = $(this);
            if ($this.data('radio')) return;
            $this.radio($this.data());
        });

        //console.log("Initializing selectpicker");
        //if ($('.selectpicker').length) {
        //    $('.selectpicker').selectpicker();
        //};

        $('.make-switch:not(.has-switch)').bootstrapSwitch();

    });
</script>